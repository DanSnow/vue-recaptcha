import{ao as b,r as v,ap as C,aq as D,ar as g,as as x,J as y,a5 as K}from"./entry.47e57103.js";var c=(r=>(r.Init="init",r.Verified="verified",r.Expired="expired",r.Error="error",r))(c||{});function R({root:r=v(),options:f={}}){const e=b(),n=v(),t=C(),a=x(),s=x(),u=x(),l=D(r),i=v("init");return g(l,async p=>{const d=await t.render(p,{...f,sitekey:e,callback:a.trigger,"expired-callback":s.trigger,"error-callback":u.trigger});n.value=d}),a.on(()=>{i.value="verified"}),s.on(()=>{i.value="expired"}),u.on(()=>{i.value="error"}),{root:l,widgetID:n,execute(){typeof n.value<"u"&&t.execute(n.value)},reset(){i.value="init",typeof n.value<"u"&&t.reset(n.value)},state:i,onVerify:a.on,onExpired:s.on,onError:u.on}}function q(r,f,e){const{root:n,state:t,widgetID:a,onError:s,onExpired:u,onVerify:l,reset:i,execute:p}=R({options:r||{}}),d=y(()=>t.value===c.Expired),V=y(()=>t.value===c.Error),w=y(()=>t.value===c.Verified);return g(a,o=>{e("load",o),e("update:widgetId",o)}),K(f,(o,I)=>{!o&&I&&!d.value&&E()}),u(()=>{e("update:modelValue",null),e("expired",a.value)}),s(o=>{e("error",o)}),l(o=>{e("success",o),e("update:modelValue",o)}),{root:n,widgetID:a,state:t,isError:V,isExpired:d,isVerified:w,reset:E,execute:p};function E(){i(),k()}function k(){e("update:modelValue",null)}}export{c as R,q as u};
